{% extends 'layouts/base.html' %}


{% block content %}

{% load crispy_forms_tags %}
{% load bootstrap5 %}
{% bootstrap_css %}
{% bootstrap_messages %}
{% load static %}



    <!--  Navbar  -->
    <nav class="navbar navbar-expand-md navbar-dark bg-primary fixed-top border-bottom">
      <a class="navbar-brand" href="#">Home</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
        </ul>

        <div class="form-check form-switch ms-auto">
          <input class="form-check-input" type="checkbox" id="lightSwitch" />
          <label class="form-check-label" for="lightSwitch">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="25"
              fill="currentColor"
              class="bi bi-brightness-high"
              viewBox="0 0 16 16">
              <path
                d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"
              />
            </svg>
          </label>
        </div>
      </div>
    </nav>
    <!--  Empty Constraint Form  -->
      <div id="empty-form" class="d-none">{% crispy empty %}</div>
      

    <!-- Error Modal -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="errorModalLabel">Error</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            There was an error processing your data. Please check the syntax and try again.
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

      

      <!--  Main Forms  -->
      <div class="container mt-5 pt-5">
        
        <div class="row">
          <div class="col border-end">


            <form id="form" method="POST">
                {% csrf_token %}
                {% crispy formFunction helper %}
                <div id="label-target"></div>
                {% crispy formset helper %}
                <div id="restriction-form-id"> </div>
                <button id='add-more' type="button" class="btn btn-primary">Add Constraint</button>
                <button type="reset" class="btn btn-primary">Clear All</button>
                <button id="submit-func" type="submit" class="btn btn-primary">Submit</button>
              </form>
            
            </div>

              <div class="col">
                  <!-- Dropzone Upload file  -->
                  <form action="upload/" method="POST" class="dropzone dz" id="drop-zone">
                  {% csrf_token %}
                  
                  </form>

              </div>

          </div>
       </div>





<!-- Scripts -->       
<script src="{% static './js/jquery/jquery-3.6.4.js' %}"></script>
<script src="{% static './js/bootstrap/bootstrap.js' %}"></script>
<script src="{% static './js/bootstrap/bootstrap.min.js' %}"></script>

<!-- CSS -->
<link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />  
<link rel="stylesheet" type='text/css'  href="{% static './styles/main.css' %}">
<link rel="stylesheet" type='text/css'  href="{% static './styles/theme.css' %}">      

<!-- Scripts -->
<script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
<script src="{% static './js/index.js' %}" type="module"></script>
<script src="{% static './js/text-form-ajax.js' %}" type="module"></script>
<script src="{% static './js/dropzone.js' %}" type="module"></script>
<script>

/**
 *  Light Switch @version v0.1.2
 *  @author han109k
 *  https://www.cssscript.com/dark-mode-switcher-bootstrap-5/
 */

 (function () {
  let lightSwitch = document.getElementById("lightSwitch");
  if (lightSwitch) {
    darkMode();
    lightSwitch.addEventListener("change", () => {
      lightMode();
    });

    /**
     * @function darkmode
     * @summary: firstly, checks if browser local storage has 'lightSwitch' key
     * if key has 'dark' value then changes the theme to 'dark mode'
     * Basically, replaces/toggles every CSS class that has '-light' class with '-dark'
     */
    function darkMode() {
      let isSelected =
        localStorage.getItem("lightSwitch") !== null &&
        localStorage.getItem("lightSwitch") === "dark";

      if (isSelected) {
        document.querySelectorAll(".bg-light").forEach((element) => {
          element.className = element.className.replace(/-light/g, "-dark");
        });

        document.body.classList.add("bg-dark");

        if (document.body.classList.contains("text-dark")) {
          document.body.classList.replace("text-dark", "text-light");
        } else {
          document.body.classList.add("text-light");
        }
        
        // set light switch input to true
        lightSwitch.checked = true;
      }
    }

    /**
     * @function lightmode
     * @summary: check whether the switch is on (checked) or not.
     * If the switch is on then set 'lightSwitch' local storage key and call @function darkmode
     * If the switch is off then it is light mode so, switch the theme and
     *  remove 'lightSwitch' key from local storage
     */
    function lightMode() {
      if (lightSwitch.checked) {
        localStorage.setItem("lightSwitch", "dark");
        darkMode();
      } else {
        document.querySelectorAll(".bg-dark").forEach((element) => {
          element.className = element.className.replace(/-dark/g, "-light");
        });
        document.body.classList.replace("text-light", "text-dark");
        localStorage.removeItem("lightSwitch");
      }
    }
  }
})();

</script>


{% endblock content %}



